#include "spi.h"

struct spi_flash_info spi_table[] = {
	/* Winbond 64 K Sectors */
	{ "Winbond W25X64" , 0xEF, 0x1730, 0x00010007, 0x800000 , 75  * 1000000,  1, 0x00, {{ 0, 64  * 1024, 128 },} },
	{ "Winbond W25Q32" , 0xEF, 0x1640, 0x0001000F, 0x400000 , 75  * 1000000 , 1, 0x00, {{ 0, 64  * 1024, 128 },} },
	{ "Winbond W25Q64" , 0xEF, 0x1740, 0x0001000F, 0x800000 , 80  * 1000000,  1, 0x00, {{ 0, 64  * 1024, 128 },} },
	{ "Winbond W25Q128", 0xEF, 0x1840, 0x0001000F, 0x1000000, 104 * 1000000,  1, 0x00, {{ 0, 64  * 1024, 256 },} },
	{ "Winbond W25Q256", 0xEF, 0x1940, 0x001F001F, 0x2000000, 50 * 1000000,  1, 0x02, {{ 0, 64  * 1024, 512 },} },
	{ "Winbond W25Q257", 0xEF, 0x1940, 0x001F001F, 0x2000000, 50 * 1000000,  1, 0x01, {{ 0, 64  * 1024, 512 },} },
	{ "Winbond W25M512", 0xEF, 0x1971, 0x001F001F, 0x4000000, 50 * 1000000,  2, 0x06, {{ 0, 64  * 1024, 512 },{ 0x2000000, 64  * 1024, 512 },} },
	{ "Winbond W25Q512JV", 0xEF, 0x2040, 0x001F001F, 0x4000000, 50 * 1000000,  2, 0x02, {{ 0, 64  * 1024, 512 },{ 0x2000000, 64  * 1024, 512 },} },

	/* Macronix 64 K Sectors */
	{ "Macronix MX25L1605D" , 0xC2, 0x1520, 0x0001000B, 0x200000 , 66 * 1000000, 1, 0x00, {{ 0, 64  * 1024, 32 },} },
	{ "Macronix MX25L3205D" , 0xC2, 0x1620, 0x0001000B, 0x400000 , 66 * 1000000, 1, 0x00, {{ 0, 64  * 1024, 64 },} },
	{ "Macronix MX25L6405D" , 0xC2, 0x1720, 0x0001000B, 0x800000 , 66 * 1000000, 1, 0x00, {{ 0, 64  * 1024, 128 },} },
	{ "Macronix MX25L12805D", 0xC2, 0x1820, 0x00010001, 0x1000000, 50 * 1000000, 1, 0x00, {{ 0, 64  * 1024, 256 },} },
    	{ "Macronix MX25L25635E", 0xC2, 0x1920, 0x002F002F, 0x2000000, 50 * 1000000, 1, 0x02, {{ 0, 64  * 1024, 512 },} },       
    	{ "Macronix MX25L25735E", 0xC2, 0x1920, 0x002F002F, 0x2000000, 50 * 1000000, 1, 0x01, {{ 0, 64  * 1024, 512 },} },
	{ "Macronix MX25L51245G", 0xC2, 0x1A20, 0x002F002F, 0x4000000, 66 * 1000000, 1, 0x02, { {0, 64 * 1024, 1024},}},
    	{ "Macronix MX66L51235F", 0xC2, 0x1A20, 0x002F002F, 0x4000000, 50 * 1000000, 1, 0x02, {{ 0, 64  * 1024, 1024 },} },
    	{ "Macronix MX66L1G45G", 0xC2, 0x1B20, 0x002F002F, 0x8000000, 50 * 1000000, 1, 0x02, {{ 0, 64  * 1024, 2048 },} },
    	{ "EON EN25QH256",        0x1C, 0x1970, 0x0001000F, 0x2000000, 50 * 1000000, 1, 0x02, {{ 0, 64  * 1024, 512 },} },
};

struct spi_flash_info *spi_flash_lookup(uint8_t b1, uint8_t b2, uint8_t b3)
{
        int i, tsize = sizeof(spi_table)/sizeof(struct spi_flash_info);
        uint16_t dev_id;
        struct spi_flash_info *ps;

        dev_id = ((int16_t)b3<<8)|b2;

        for (i=0; i<tsize; i++) {
                ps = &spi_table[i];
                if (ps->mfr_id == b1 && ps->dev_id == dev_id)
                        return ps;
        }
        return NULL;
}
